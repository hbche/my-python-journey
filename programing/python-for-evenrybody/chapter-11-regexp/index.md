# 第 11 章 正则表达式

> 什么是正则表达式？
>
> 正则表达式是一种用于判断一组字符串是否符合特定模式的方法。正则表达式的核心思想
> 在于，它不仅仅局限于匹配具体的字符，而是提供了一种近乎微型通配符编程表达式的机
> 制，能够灵活地定义和匹配复杂的文本模式。
>
> 总的来说，它用一套带”魔法符号“的字符串来描述[我要的字符串长什么样]，只要符合规
> 则，就算匹配成功。

正则表达式元字符速查指南

| 符号     | 含义                                                             |
| -------- | ---------------------------------------------------------------- |
| `^`      | 匹配字符串的起始位置的内容                                       |
| `$`      | 匹配字符串的结束位置的内容                                       |
| `.`      | 匹配除去换行符 `\n` 之外的任意一个字符                           |
| `\s`     | 匹配空格字符                                                     |
| `\S`     | 匹配任意非空格字符                                               |
| `*`      | 表示符号前的元素会匹配 0 次或多次                                |
| `+`      | 表示符号前的元素会匹配 1 次或多次                                |
| `?`      | 表示符号前的元素可选，并且最多匹配 1 次                          |
| `[]`     | 匹配多个字符，在方括号内部的所有字符都会被匹配                   |
| `[abc]`  | 匹配集合中任意一个字符，此处指匹配 `a`、`b`、`c`中的任意一个字符 |
| `[^xyz]` | 匹配不在集合中的任意一个字符                                     |
| [a-z0-9] | 支持连续区间（如：a-z、0-9）                                     |
| `()`     | 提取范围                                                         |

## 正则表达式的使用

1. 拿钥匙开武器库

在 python 中，正则表达式并不像字符串、列表或字典那样直接内置于基础语言中。因此，
我们需要在程序开头使用 import 语句，将正则表达式库引入到当前程序中。

```py
# 在文件的最开头导入 re 模块
import re
```

2. 两个常用武器库

| 函数名称     | 作用                                             |
| ------------ | ------------------------------------------------ |
| `re.search`  | 匹配符合样式的第一个位置，返回包含匹配信息的对象 |
| `re.findall` | 匹配字符串中的全部样式，返回组合列表             |

`re.search`: 这是正则表达式库中的搜索功能，它会返回一个布尔值，告诉你是否匹配成
功，就像是一个智能的查找工具。类似 js 中正则对象的 `test` 。

`re.findall`: 像是提取功能，它比切片操作更强大，其核心思想是定位某段内容的起始和
结束位置，并将其提取出来。

下面是一个 demo，用于查找文档中`以 # 开头的行`：

```py
hand = open('index.md', mode='r', encoding='utf-8')
with hand:
    for line in hand:
        line = line.strip()
        if line.find('#') >= 0:
            print(line)
```

下面改用正则表达式查找：

```py
import re

hand = open('index.md', mode='r', encoding='utf-8')
with hand:
    for line in hand:
        line = line.strip()
        if re.search('^#', line):
            print(line)
```

我们再看两个正则表达式的示例：

正则表达式 `^X.*:` 表示以大写字母 X 开头，后跟任意数量的字符，最后以冒号结尾的行
。其中 X 和冒号不是正则表达式的元字符，只有 `^`、`.`和`*`是正则表达式的元字符。

正则表达式 `^X-\S+:` 表示以 `X-` 开头，后跟任意个非空格字符，最后以冒号结尾的字
符串。

## 数据提取

