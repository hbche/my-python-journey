# 第 1 章 爬虫基础

## 1.1 HTTP 基本原理

#### 常见的错误状态码及原因

| 状态码 | 说明            | 详情                                                                 |
| ------ | --------------- | -------------------------------------------------------------------- |
| 100    | 继续            | 请求这应当继续提出请求。服务器已接收到请求的一部分，正在等待其余部分 |
| 101    | 切换协议        | 请求这已要求服务器切换协议，服务器已确认并准备切换                   |
| 200    | 成功            | 服务器已成功处理了请求                                               |
| 201    | 已创建          | 请求成功并且服务器创建了新的资源                                     |
| 202    | 已接收          | 服务器已接收请求，但尚未处理                                         |
| 203    | 非授权信息      | 服务器已接收请求，但没有返回任何内容                                 |
| 204    | 无内容          | 服务器成功处理了请求，但没有返回任何内容                             |
| 205    | 重置内容        | 服务器成功处理了请求，内容被重置                                     |
| 206    | 部分内容        | 服务器成功处理了部分请求                                             |
| 300    | 多种选择        | 针对请求，服务器可执行多种操作                                       |
| 301    | 永久移动        | 请求的网页已永久移动到其他页面，即永久重定向                         |
| 302    | 临时移动        | 请求的网页暂时跳转到其他页面，即暂时重定向                           |
| 303    | 查看其他位置    | 如果原来的请求是 POST，重定向目标文档应该通过 GET 提取               |
| 304    | 未修改          | 此次请求的网页未经修改，继续使用上次的资源                           |
| 305    | 使用代理        | 请求者应该使用代理访问该网页                                         |
| 307    | 临时重定向      | 临时从其他位置响应请求的资源                                         |
| 400    | 错误请求        | 服务器无法解析该请求                                                 |
| 401    | 未授权          | 请求没有进行身份验证或验证未通过                                     |
| 403    | 禁止访问        | 服务器拒绝请求                                                       |
| 404    | 未找到          | 服务器找不到请求的网页                                               |
| 405    | 方法禁用        | 服务器禁用了请求中指定的方法                                         |
| 406    | 不接收          | 无法使用请求的内容响应请求的网页                                     |
| 407    | 需要代理授权    | 请求者需要使用代理授权                                               |
| 408    | 请求超时        | 服务器请求超时                                                       |
| 409    | 冲突            | 服务器在完成请求时发生冲突                                           |
| 410    | 已删除          | 请求的资源已永久删除                                                 |
| 411    | 需要有效长度    | 服务器在不接收不含有效内容长度标头字段的请求                         |
| 412    | 未满足前提条件  | 服务器为满足请求者在请求中设置的某一个前置条件                       |
| 413    | 请求实体过大    | 请求实体过大，超过服务器的处理能力                                   |
| 414    | 请求 URI 过长   | 请求网址过长，服务器无法处理                                         |
| 415    | 不支持类型      | 请求格式不被请求网页支持                                             |
| 416    | 请求范围不符    | 页面无法提供请求的范围                                               |
| 417    | 未满足期望值    | 服务器未满足期望请求标头字段的请求                                   |
| 500    | 服务器内部错误  | 服务器遇到错误，无法完成请求                                         |
| 501    | 未实现          | 服务器不具备完成请求的能力                                           |
| 502    | 错误网关        | 服务器作为网关或代理，没有及时从上游服务器接收到请求                 |
| 503    | 服务不可用      | 服务器目前无法使用                                                   |
| 504    | 网关超时        | 服务器作为网关或代理，没有及时从上游服务器接收到请求                 |
| 505    | HTTP 版本不支持 | 服务器不支持请求中使用的 HTTP 协议版本                               |

## 1.3 爬虫的基本原理

### 1.3.1 爬虫概述

- 抓取网页
- 提取信息
- 保存数据
- 自动化程序

### 1.3.2 能爬取怎样的数据

1. HTML
2. JSON 字符串
3. 图片、视频和音频等各种二进制数据
4. CSS、JavaScript 和配置文件等各种扩展文件

### 1.3.3 JavaScript 渲染的页面

依赖 JavaScript 渲染的网页，我们可以分析源代码后台 Ajax 接口，也可以使用
Selenium、Splash、Pyppeteer、Playwright 等库模拟 JavaScript 渲染。然后采集
JavaScript 渲染出来的网页。

## 1.4 Session 和 Cookie

## 1.5 代理的基本原理

服务器会检测某个 IP 单位时间内的请求次数，如果请求次数超过服务器设定的阈值，就直
接拒绝提供服务，并返回一些错误信息，可以称这种情况为*封 IP*。

绕过服务器请求次数检测的办法是伪装 IP，我们可以通过代理伪装我们自己的真实 IP。

### 1.5.1 基本原理

### 1.5.2 代理的作用

1. 突破自身 IP 的访问限制，访问一些平时不能访问的站点。
2. 访问一些单位或团队的内部资源。
3. 提高访问速度。通常，代理服务器会设置一个较大的硬盘缓冲区，当有外界的信息通过
   时，会同时将其保存到自己的缓冲区中，当其他用户访问相同的信息时，直接从缓冲区
   取出信息，提高了访问速度。
4. 隐藏真实 IP。上网者可以通过代理隐藏自己的 IP，免受攻击。对于爬虫来说，使用代
   理就是为了隐藏自身 IP，防止自身的 IP 被封锁。

### 1.5.3 爬虫代理

使用代理隐藏真实的 IP，让服务器误以为是代理服务器在请求自己。这样在爬取过程中不
断更换代理，就可以避免 IP 被封锁，达到很好的爬取效果。

### 1.5.4 代理分类

- 根据协议区分
  - FTP 代理服务器
  - HTTP 代理服务器
  - SSL/TLS 代理服务器
  - RTSP 代理
  - Telnet 代理
  - POP3/SMTP 代理
  - SOCKS 代理
- 根据匿名程度区分
  - 高度匿名代理
  - 普通匿名代理
  - 透明代理
  - 间谍代理

### 1.5.5 常见代理设置
